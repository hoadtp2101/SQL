BÀI TẬP SQL
1. Viết lệnh sql để tạo dữ liệu cho các bảng
	- bảng project_users 
	CREATE TABLE project_users (
		id bigint NOT NULL,
		project_id bigint,
		user_id bigint,
		creat_at timestamp,
		update_at timestamp DEFAULT CURRENT_TIMESTAMP,
		PRIMARY KEY (id),
		FOREIGN KEY (user_id) REFERENCES users(id),
		FOREIGN KEY (project_id) REFERENCES projects(id))
	- bảng users
	CREATE TABLE users (
		id bigint NOT NULL,
		username varchar(50),
		email varchar(250),
		password varchar(50),
		birthday date,
		image_url text,
		is_active boolean,
		creat_at timestamp,
		update_at timestamp DEFAULT CURRENT_TIMESTAMP,
		PRIMARY KEY (id))
	- bảng projects
	CREATE TABLE projects (
		id bigint NOT NULL,
		project_name varchar(255),
		category_id bigint,
		projected_spend int,
		projected_variance int,
		revenue_recognised int,
		company_id bigint,
		creat_at timestamp,
		update_at timestamp DEFAULT CURRENT_TIMESTAMP,
		PRIMARY KEY (id),
		FOREIGN KEY (category_id) REFERENCES categories(id),
		FOREIGN KEY (company_id) REFERENCES companies(id))
	- bảng categories
	CREATE TABLE categories (
		id bigint NOT NULL,
		category_name varchar(50),	
		creat_at timestamp,
		update_at timestamp DEFAULT CURRENT_TIMESTAMP,
		PRIMARY KEY (id))
	- bảng companies
	CREATE TABLE companies (
		id bigint NOT NULL,
		company_name text,
		company_code text,		
		creat_at timestamp,
		update_at timestamp DEFAULT CURRENT_TIMESTAMP,
		PRIMARY KEY (id))

2. Viết lệnh sql để có thể lấy thông tin những bản ghi của projects và số lượng user của mỗi projects đó (count user)
	SELECT p.*, COUNT(pu.user_id) 
	  FROM projects	as p
	  INNER JOIN project_users as pu
	  ON p.id = pu.project_id
	  GROUP BY pu.project_id

3. viết lệnh sql để lấy ra danh sách các project của company có company_name = “monstar-lab” 
	SELECT p.*, c.company_name 
	  FROM projects	as p
	  INNER JOIN companies as c
	  ON p.company_id = c.id	  
	  WHERE c.company_name = 'monstar-lab'

4. viết lệnh sql lấy ra danh sách các công ty có project có project_spend > 100
	SELECT c.*, p.projected_spend
	  FROM companies as c
	  INNER JOIN projects as p
	  ON p.company_id = c.id	  
	  WHERE p.projected_spend > 100

5. viết lệnh sql để lấy ra thông tin của user  tham gia vào projects
	SELECT p.project_name, u.* 
	  FROM project_users as pu
	  INNER JOIN projects as p ON p.id = pu.project_id	
	  INNER JOIN users as u ON u.id = pu.user_id  
	  WHERE p.id = ANY(SELECT p.id FROM projects)
	  ORDER BY p.id

6. lấy ra danh sách project mà có số lượng user tham gia > 10 , sắp xếp số lượng user tham gia tăng dần
	SELECT p.*, COUNT(pu.user_id) as sl
	  FROM projects	as p
	  INNER JOIN project_users as pu
	  ON p.id = pu.project_id	
	  GROUP BY pu.project_id
	  HAVING sl > 10
	  ORDER BY sl	  

7. Xoá project mà chưa có user nào tham gia
DELETE FROM projects 
	WHERE id = ANY(
			SELECT id
				FROM projects	
				WHERE NOT id = ANY(SELECT project_id FROM project_users)
			)  